import{L as y,M as c,aA as L,O as V,k as x,c as p,o as n,R as w,z as $,i as l,n as F,aB as S,T as P,f as b,_ as G,r as B,d as s,e as f,H as J,a7 as K,B as M,aC as Q,a4 as W,j as X,E as O,aD as Y,aE as Z}from"./entry-1.0.7.js";import{E as ee,a as te}from"./el-form-1.0.7.js";import"./castArray-1.0.7.js";import"./_Uint8Array-1.0.7.js";import"./_initCloneObject-1.0.7.js";const le=c({name:"ElContainer"}),re=c({...le,props:{direction:{type:String}},setup(u){const t=u,r=L(),e=V("container"),i=x(()=>t.direction==="vertical"?!0:t.direction==="horizontal"?!1:r&&r.default?r.default().some(E=>{const k=E.type.name;return k==="ElHeader"||k==="ElFooter"}):!1);return(_,E)=>(n(),p("section",{class:$([l(e).b(),l(e).is("vertical",l(i))])},[w(_.$slots,"default")],2))}});var ae=y(re,[["__file","container.vue"]]);const oe=c({name:"ElAside"}),se=c({...oe,props:{width:{type:String,default:null}},setup(u){const t=u,r=V("aside"),e=x(()=>t.width?r.cssVarBlock({width:t.width}):{});return(i,_)=>(n(),p("aside",{class:$(l(r).b()),style:F(l(e))},[w(i.$slots,"default")],6))}});var H=y(se,[["__file","aside.vue"]]);const ne=c({name:"ElFooter"}),ue=c({...ne,props:{height:{type:String,default:null}},setup(u){const t=u,r=V("footer"),e=x(()=>t.height?r.cssVarBlock({height:t.height}):{});return(i,_)=>(n(),p("footer",{class:$(l(r).b()),style:F(l(e))},[w(i.$slots,"default")],6))}});var A=y(ue,[["__file","footer.vue"]]);const ie=c({name:"ElHeader"}),de=c({...ie,props:{height:{type:String,default:null}},setup(u){const t=u,r=V("header"),e=x(()=>t.height?r.cssVarBlock({height:t.height}):{});return(i,_)=>(n(),p("header",{class:$(l(r).b()),style:F(l(e))},[w(i.$slots,"default")],6))}});var I=y(de,[["__file","header.vue"]]);const ce=c({name:"ElMain"}),me=c({...ce,setup(u){const t=V("main");return(r,e)=>(n(),p("main",{class:$(l(t).b())},[w(r.$slots,"default")],2))}});var U=y(me,[["__file","main.vue"]]);P(ae,{Aside:H,Footer:A,Header:I,Main:U});S(H);S(A);const pe=S(I);S(U);const fe={xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",class:"icon",viewBox:"0 0 1024 1024"};function _e(u,t){return n(),p("svg",fe,t[0]||(t[0]=[b("path",{d:"M512 1024C229.696 1024 0 794.304 0 512S229.696 0 512 0s512 229.696 512 512-229.696 512-512 512m0-960C264.96 64 64 264.96 64 512c0 246.976 200.96 448 448 448 246.976 0 448-201.024 448-448 0-247.04-201.024-448-448-448"},null,-1),b("path",{d:"M784 544H240a32 32 0 0 1 0-64h544a32 32 0 0 1 0 64"},null,-1),b("path",{d:"M512 816a32 32 0 0 1-32-32V240a32 32 0 0 1 64 0v544a32 32 0 0 1-32 32"},null,-1)]))}const he={render:_e},ve={xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",class:"icon",viewBox:"0 0 1024 1024"};function ge(u,t){return n(),p("svg",ve,t[0]||(t[0]=[b("path",{fill:"#3D3D3D",d:"M92.748 203.507h838.504v44.14H92.748zm551.654-88.268v44.127h44.128V115.24c0-24.385-19.756-44.128-43.998-44.128h-265.05a43.98 43.98 0 0 0-31.173 12.916 43.92 43.92 0 0 0-12.826 31.212v44.127h44.128V115.24zm0 0"},null,-1),b("path",{fill:"#3D3D3D",d:"M203.074 909.615v-661.98h-44.128v661.94c0 24.411 19.64 44.18 44.18 44.18h617.761c24.41 0 44.18-19.64 44.18-44.18v-661.94h-44.14v661.98zm0 0"},null,-1),b("path",{d:"M313.413 335.903h44.127v397.188h-44.127zm176.523 0h44.128v397.188h-44.128zm176.524 0h44.127v397.188H666.46zm0 0"},null,-1)]))}const be={render:ge},Ne={class:"box"},ye={__name:"invoice",setup(u){const t=B(!1),r=B(null),e=B({orders:[{orderNo:""}],companyName:"",taxNumber:"",email:"",mobile:""}),i=B({companyName:[{required:!0,message:"请输入发票抬头公司名",trigger:"blur"}],taxNumber:[{required:!0,message:"请输入税号",trigger:"blur"}],email:[{required:!0,message:"请输入发票接收邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:["blur","change"]}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号格式",trigger:"blur"}]});function _(){e.value.orders.push({orderNo:"",key:Date.now()})}function E(h){e.value.orders.length>1?(e.value.orders.splice(h,1),i.value.orders.splice(h,1)):O.warning("至少保留一个订单号")}function k(h){r.value.validateField("orders."+h+".orderNo")}function q(h){h.preventDefault(),r.value.validate(async a=>{if(a)try{t.value=!0;const v=e.value.orders.map(m=>m.orderNo).join(),d=await Y({OrderID:v});if(d.S==="1"){if(d.Orders!==v){let N=d.Orders.split(","),R=e.value.orders.map(D=>D.orderNo),j=new Set(N);const T=[...new Set(R)].filter(D=>!j.has(D));O.success(`${T.join(",")} 订单号不支持开票, 请删除后申请`);return}const{companyName:m,taxNumber:C,email:z,mobile:o}=e.value;(await Z({Amount:d.MoneyTotal,EnterpriseName:m,EnterpriseNumber:C,Email:z,ReceivingPhone:o,Orders:v})).S==="1"&&O.success("发票申请提交成功"),t.value=!1}else t.value=!1}catch(v){console.error("[error]:",v),t.value=!1}})}return(h,a)=>{const v=pe,d=Q,m=ee,C=W,z=te;return n(),p("div",Ne,[s(v,null,{default:f(()=>a[4]||(a[4]=[b("h1",{class:"title"},"增值税普通发票",-1)])),_:1}),s(z,{ref_key:"formRef",ref:r,model:l(e),rules:l(i),"label-width":"80px","label-position":"top",size:"large",class:"form"},{default:f(()=>[(n(!0),p(J,null,K(l(e).orders,(o,g)=>(n(),M(m,{key:o.key,label:g===0?"订单号":"订单号 "+(g+1),rules:{required:!0,message:"请输入订单号",trigger:"blur"},prop:"orders."+g+".orderNo"},{default:f(()=>[s(d,{modelValue:o.orderNo,"onUpdate:modelValue":N=>o.orderNo=N,placeholder:"请输入订单号",onBlur:N=>k(g)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),g===0?(n(),M(l(he),{key:0,class:"add",onClick:_})):(n(),M(l(be),{key:1,class:"del",onClick:N=>E(g)},null,8,["onClick"]))]),_:2},1032,["label","prop"]))),128)),s(m,{label:"发票抬头",prop:"companyName"},{default:f(()=>[s(d,{modelValue:l(e).companyName,"onUpdate:modelValue":a[0]||(a[0]=o=>l(e).companyName=o),placeholder:"请输入发票抬头"},null,8,["modelValue"])]),_:1}),s(m,{label:"税号",prop:"taxNumber"},{default:f(()=>[s(d,{modelValue:l(e).taxNumber,"onUpdate:modelValue":a[1]||(a[1]=o=>l(e).taxNumber=o),placeholder:"请输入税号"},null,8,["modelValue"])]),_:1}),s(m,{label:"发票接收邮箱",prop:"email"},{default:f(()=>[s(d,{modelValue:l(e).email,"onUpdate:modelValue":a[2]||(a[2]=o=>l(e).email=o),placeholder:"请输入发票接收邮箱"},null,8,["modelValue"])]),_:1}),s(m,{label:"手机号",prop:"mobile"},{default:f(()=>[s(d,{modelValue:l(e).mobile,"onUpdate:modelValue":a[3]||(a[3]=o=>l(e).mobile=o),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),s(C,{loading:l(t),class:"btn",onClick:q},{default:f(()=>a[5]||(a[5]=[X("提交")])),_:1},8,["loading"])]),_:1},8,["model","rules"])])}}},xe=G(ye,[["__scopeId","data-v-8791f216"]]);export{xe as default};
