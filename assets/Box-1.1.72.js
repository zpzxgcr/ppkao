import{c as p,o as n,f as a,_ as B,m as A,r as f,D as N,a3 as K,a as O,B as C,e as r,h as V,d as u,i as e,aC as J,a4 as Q,j as M,y as H,at as X,as as ee,aS as te,s as Z,E as U,av as se,aw as oe,b as ne,A as R,k as le,aL as ae,z as ie,a9 as q}from"./entry-1.1.7.js";import{E as re,a as ce}from"./el-form-1.1.7.js";import{a as j}from"./el-popper-1.1.7.js";import"./el-tooltip-1.1.7.js";import{s as ue,f as de,u as pe,h as me,w as ge,g as F}from"./user-1.1.72.js";import{E as fe}from"./el-image-viewer-1.1.7.js";import{v as ve}from"./el-loading-1.1.7.js";import{E as we}from"./el-checkbox-1.1.7.js";import{E as ye}from"./el-dialog-1.1.7.js";const _e={xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",class:"icon",viewBox:"0 0 1024 1024"};function xe(v,i){return n(),p("svg",_e,i[0]||(i[0]=[a("path",{fill:"#515151",d:"M613.476 1021.091H410.53c-192.502 0-344.539 0-344.539-99.844v-19.973c0-187.12 154.58-339.332 344.54-339.332H613.47c189.959 0 344.545 152.212 344.545 339.332v19.973c-.035 99.844-159.718 99.844-344.54 99.844m-202.98-399.299c-156.942 0-284.649 125.35-284.649 279.447v19.968c0 39.964 164.506 39.964 284.648 39.964h202.946c99.453 0 284.653 0 284.653-39.964v-19.968c0-154.097-127.712-279.447-284.653-279.447zm91.343-79.881c-150.833 0-273.483-120.905-273.483-269.522 0-148.61 122.656-269.48 273.483-269.48s273.483 120.87 273.483 269.48c0 148.617-122.685 269.522-273.483 269.522M288.247 272.389c0 115.564 95.817 209.63 213.592 209.63 117.786 0 213.598-94.03 213.598-209.63S619.619 62.794 501.839 62.794c-117.775 0-213.592 94.037-213.592 209.595"},null,-1)]))}const he={render:xe},ke={xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",class:"icon",viewBox:"0 0 1024 1024"};function be(v,i){return n(),p("svg",ke,i[0]||(i[0]=[a("path",{fill:"#515151",d:"M826.347 1023.988H197.975a152.2 152.2 0 0 1-99.52-36.65l-.457-.409c-27.99-25.291-43.431-58.514-43.431-93.555V515.03c0-35.289 15.863-69.427 43.542-93.703 22.185-20.045 50.533-32.567 81.28-36.168v-86.008a270.5 270.5 0 0 1 26.79-117.325 297.8 297.8 0 0 1 72.075-94.891l1.299-1.077 2.153-1.67C344.166 29.894 426.079.049 512.458.049 600.037.05 683 30.983 746.043 87.047a295.4 295.4 0 0 1 71.964 94.842 271.5 271.5 0 0 1 26.59 117.263v85.946c31.442 3.502 59.987 16.086 81.789 36.366 27.358 24.078 43.047 58.155 43.047 93.567v378.343c0 35.24-15.293 68.462-43.06 93.555l-1.162 1.052-3.811 2.71c-25.849 21.48-59.529 33.297-95.053 33.297m-692.28-77.446a98.1 98.1 0 0 0 63.908 23.3h628.372c23.138 0 44.767-7.548 60.914-21.233l.866-.73 2.97-2.116c15.578-14.551 24.128-33.1 24.128-52.39V515.032c0-20.218-8.834-39.075-24.87-53.094l-.68-.619c-15.678-14.662-38.754-23.076-63.328-23.076H790.39v-139.09c0-64.91-28.46-125.875-80.242-171.656-53.206-47.316-123.363-73.35-197.653-73.35-73.548 0-143.05 25.329-195.71 71.333l-1.164.965-2.054 1.596c-51.584 45.918-79.994 106.66-79.994 171.112v139.09h-35.598c-24.425 0-47.02 8.29-63.65 23.361l-.358.334C117.708 476.142 108.75 495 108.75 515.031v378.343c0 19.438 8.983 38.308 25.316 53.168m378.317-33.556c-26.257 0-47.626-19.637-47.626-43.778v-39.285A135.9 135.9 0 0 1 417.74 802.7c-25.576-22.754-40.25-54.294-40.25-86.54s14.674-63.747 40.263-86.49c25.303-22.556 58.934-34.992 94.693-34.992a142.1 142.1 0 0 1 93.94 34.918c25.674 22.817 40.35 54.344 40.35 86.614s-14.676 63.785-40.252 86.614a135.9 135.9 0 0 1-47.427 27.222v39.161c-.124 24.141-21.035 43.778-46.672 43.778m0-281.768c-26.777 0-51.77 9.144-70.38 25.737-17.818 15.838-28.026 37.405-28.026 59.194s10.208 43.406 28 59.244a100.4 100.4 0 0 0 45.015 22.83l14.254 3.167v67.818c0 3.416 4.74 7.227 11.137 7.227 5.926 0 10.06-3.811 10.06-7.227V801.34l14.39-3.13a100.1 100.1 0 0 0 45.286-22.817c17.793-15.838 28.001-37.43 28.001-59.244s-10.208-43.307-27.988-59.17c-19.241-16.827-43.382-25.761-69.75-25.761m-333.6-245.6H846.18v52.797H178.784z"},null,-1)]))}const P={render:be},Ce={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",class:"icon",viewBox:"0 0 1024 1024"};function Ve(v,i){return n(),p("svg",Ce,i[0]||(i[0]=[a("path",{fill:"#515151",d:"M808.448 61.44H237.056c-50.688 0-92.16 41.472-92.16 92.16v714.752c0 50.688 41.472 92.16 92.16 92.16h571.392c50.688 0 92.16-41.472 92.16-92.16V153.6c0-50.688-41.472-92.16-92.16-92.16m30.72 806.912c0 16.896-13.824 30.72-30.72 30.72H237.056c-16.896 0-30.72-13.824-30.72-30.72V153.6c0-16.896 13.824-30.72 30.72-30.72h571.392c16.896 0 30.72 13.824 30.72 30.72z"},null,-1),a("path",{fill:"#515151",d:"M593.92 770.048H406.016c-16.896 0-30.72 13.824-30.72 30.72s13.824 30.72 30.72 30.72H593.92c16.896 0 30.72-13.824 30.72-30.72s-13.824-30.72-30.72-30.72"},null,-1)]))}const $e={render:Ve},ze={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",class:"icon",viewBox:"0 0 1024 1024"};function Ie(v,i){return n(),p("svg",ze,i[0]||(i[0]=[a("path",{fill:"#515151",d:"M943.1 172c-2.4-.2-245.1-25.3-413.8-147.8-5.1-3.7-11-5.6-17.3-5.6-6.2 0-12.2 1.9-17.3 5.6C326.9 146 83.3 171.8 80.9 172c-15.2 1.4-26.6 14.1-26.6 29.3 0 6.7.6 165.8 54.8 344.4 32.1 105.8 76.4 196.4 131.9 269.2 70.3 92.3 158.5 156 262 189.2 2.9.9 5.9 1.4 9 1.4s6.1-.5 8.9-1.4c103.6-33.2 191.7-96.8 262-189.2 55.4-72.7 99.8-163.2 131.9-269.2 54.1-178.6 54.8-337.7 54.8-344.4.1-15.2-11.3-27.8-26.5-29.3m-33 55.2-.1 1.6c-2.9 58.1-13.4 174.4-51.4 299.9-66.7 220.1-183.1 360.1-346 416.1l-.6.2-.6-.2C349 888.9 232.7 749.4 165.8 530.1 126 399.6 116.4 275.9 114 228.7l-.1-1.6 1.5-.2c70.6-10.3 250.5-44.8 395.5-142.4l.9-.7 1 .7C658 182.1 837.9 216.6 908.5 227zM641.8 351 467 580.3l-89-76.1c-5.3-4.5-12.1-7-19.1-7-8.6 0-16.8 3.7-22.4 10.3-10.5 12.3-9.1 31 3.3 41.5l112.7 96.4c5.2 4.4 12.4 7 19.6 7 .9 0 1.8 0 2.7-.1 8-.8 15.4-5 20.3-11.4l193.7-254c4.8-6.3 6.8-14 5.7-21.8-1-7.8-5.1-14.7-11.3-19.5-13.1-10-31.6-7.5-41.4 5.4"},null,-1)]))}const Se={render:Ie},Me={class:"tips"},Te={key:0},Ee={key:1},Ue={key:2},He={__name:"Form",props:{loginSuccess:{type:Function}},emits:["updateTitle"],setup(v,{emit:i}){const _=i,s=A({username:"",phone:"",yzm:"",password:"",againPwd:"",md5:""}),w=f("获取验证码"),y=f(null),b=f(!1),S={username:[{required:!0,message:"请输入账号",trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],yzm:[{required:!0,message:"请输入验证码",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入密码"}],againPwd:[{required:!0,trigger:"blur",message:"请输入密码"},{validator:(m,t,k)=>{t?t!==s.password?k(new Error("两次输入的密码不一致")):k():k(new Error("请再次输入密码"))},trigger:"blur"}]},g=f("password"),o=f(!1),h=f(!1),c=f(!1),$=N(),z=K(),T=O(),d=f(1),x=m=>{m.validate(t=>{if(t)c.value=!0,W();else return!1})},W=()=>{try{s.username=s.username.trim(),s.password=s.password.trim(),d.value===1?de({username:s.username,pwd:s.password}).then(m=>{T.setUserInfo(m.UserList[0]),v.loginSuccess?v.loginSuccess():z.push({path:$.query.redirect||"/user"})}).finally(()=>{c.value=!1}):d.value===2?pe({mobile:s.phone,newpwd:s.password,code:s.yzm,MD5:s.md5}).then(m=>{U.success("找回密码成功~")}).finally(()=>{c.value=!1}):d.value===3&&me({mobile:s.phone,pwd:s.password,code:s.yzm,userfrom:9,MD5:s.md5}).then(m=>{d.value=1,U.success("账号注册成功, 快去登录吧~")}).finally(()=>{c.value=!1})}catch{c.value=!1}},E=m=>{d.value=m;let t=1;m===2?t="forget":m===3&&(t="register"),_("updateTitle",t)},Y=()=>{s.phone&&ue({Mobile:s.phone,flag:d===2?5:6,MD5:te(s.phone+"ppkao.com")}).then(m=>{if(s.md5=m.MD5Code,m.S==="1"){b.value=!0;let t=59;const k=Z(()=>{t>0?(w.value=t+"s",t--):(w.value="获取验证码",clearInterval(k))},1e3)}else U.error(m.msg)})};return(m,t)=>{const k=J,I=re,L=Q,D=j,G=ce;return n(),C(G,{ref_key:"loginRef",ref:y,model:e(s),rules:S,class:"login-form",autocomplete:"on","label-position":"left",onKeyup:t[13]||(t[13]=ee(l=>x(e(y)),["enter"]))},{default:r(()=>[e(d)===1?(n(),C(I,{key:0,prop:"username",class:"canlder"},{default:r(()=>[u(k,{ref:"username",modelValue:e(s).username,"onUpdate:modelValue":t[0]||(t[0]=l=>e(s).username=l),size:"large",placeholder:"请输入账号",name:"username",type:"text",tabindex:"1",autocomplete:"on"},{prefix:r(()=>[u(e(he),{class:"icon"})]),_:1},8,["modelValue"])]),_:1})):V("",!0),e(d)!==1?(n(),C(I,{key:1,prop:"phone",class:"canlder"},{default:r(()=>[u(k,{ref:"phone",modelValue:e(s).phone,"onUpdate:modelValue":t[1]||(t[1]=l=>e(s).phone=l),size:"large",placeholder:"请输入手机号",name:"phone",type:"text",tabindex:"1",autocomplete:"on"},{prefix:r(()=>[u(e($e),{class:"icon"})]),_:1},8,["modelValue"])]),_:1})):V("",!0),e(d)!==1?(n(),C(I,{key:2,prop:"yzm",class:"canlder"},{default:r(()=>[u(k,{ref:"yzm",modelValue:e(s).yzm,"onUpdate:modelValue":t[2]||(t[2]=l=>e(s).yzm=l),size:"large",placeholder:"请输入验证码",name:"yzm",type:"text",tabindex:"1",autocomplete:"on"},{prefix:r(()=>[u(e(Se),{class:"icon"})]),suffix:r(()=>[u(L,{type:"primary",link:"",onClick:Y,disabled:e(b)||e(s).phone.length!==11},{default:r(()=>[M(H(e(w)),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1})):V("",!0),u(D,{visible:e(o),content:"⚠️大写键盘已开启",placement:"right"},{default:r(()=>[u(I,{prop:"password",class:"canlder"},{default:r(()=>[(n(),C(k,{key:e(g),ref:"password",modelValue:e(s).password,"onUpdate:modelValue":t[3]||(t[3]=l=>e(s).password=l),size:"large","show-password":"",type:e(g),placeholder:"请输入密码",name:"password",tabindex:"2",autocomplete:"on",onKeyup:t[4]||(t[4]=l=>{o.value=l.key&&l.key.length===1&&l.key>="A"&&l.key<="Z"}),onBlur:t[5]||(t[5]=l=>o.value=!1)},{prefix:r(()=>[u(e(P),{class:"icon"})]),_:1},8,["modelValue","type"]))]),_:1})]),_:1},8,["visible"]),e(d)===3?(n(),C(D,{key:3,visible:e(h),content:"⚠️大写键盘已开启",placement:"right"},{default:r(()=>[u(I,{prop:"againPwd",class:"canlder"},{default:r(()=>[(n(),C(k,{key:e(g),ref:"againPwd",modelValue:e(s).againPwd,"onUpdate:modelValue":t[6]||(t[6]=l=>e(s).againPwd=l),size:"large","show-password":"",type:e(g),placeholder:"请输入密码",name:"againPwd",tabindex:"2",autocomplete:"on",onKeyup:t[7]||(t[7]=l=>{h.value=l.key&&l.key.length===1&&l.key>="A"&&l.key<="Z"}),onBlur:t[8]||(t[8]=l=>h.value=!1)},{prefix:r(()=>[u(e(P),{class:"icon"})]),_:1},8,["modelValue","type"]))]),_:1})]),_:1},8,["visible"])):V("",!0),u(I,null,{default:r(()=>[a("p",Me,[e(d)>1?(n(),p("span",{key:0,onClick:t[9]||(t[9]=l=>E(1))},"账号密码登录")):V("",!0),e(d)===1||e(d)===3?(n(),p("span",{key:1,onClick:t[10]||(t[10]=l=>E(2))},"忘记密码")):V("",!0),e(d)<3?(n(),p("span",{key:2,onClick:t[11]||(t[11]=l=>E(3))},"没有账号？点我注册")):V("",!0)]),u(L,{type:"primary",size:"small",class:"login-submit",loading:e(c),onClick:t[12]||(t[12]=X(l=>x(e(y)),["prevent"]))},{default:r(()=>[e(d)===1?(n(),p("span",Te,"登录")):e(d)===2?(n(),p("span",Ee,"找回密码")):(n(),p("span",Ue,"立即注册"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}},Be=B(He,[["__scopeId","data-v-9cbafeae"]]),Le={class:"qrcode"},De={class:"image-slot","element-loading-text":"二维码加载中..."},Re={key:1,class:"fail-tip","element-loading-text":"二维码加载中..."},qe={__name:"Scan",props:{loginSuccess:Function},setup(v){const i=N(),_=K(),s=f(""),w=f(!1),y=f(!1);let b=null;const S=O();se(()=>{g()}),oe(()=>{clearInterval(b)});const g=async()=>{const{QRCode:h,Code:c}=await ge();if(y.value=!1,w.value=!1,h){s.value=h;let $=0;b=Z(()=>{if($>=120){clearInterval(b),y.value=!0;return}$++,o(c)},2e3)}},o=h=>{ne(h).then(c=>{c.S==="1"&&(clearInterval(b),S.setUserInfo(c.UserList[0]),v.loginSuccess?v.loginSuccess():_.push({path:i.query.redirect||"/user"}))})};return(h,c)=>{const $=fe,z=ve;return n(),p("div",Le,[e(s)?(n(),C($,{key:0,fit:"cover",src:e(s),alt:"点击刷新登录",class:"el-image-box",onClick:g,onLoad:c[0]||(c[0]=T=>w.value=!0)},{placeholder:r(()=>[R(a("div",De,null,512),[[z,!0]])]),error:r(()=>[a("div",{class:"image-slot",onClick:g},c[1]||(c[1]=[a("i",{class:"el-icon-picture-outline"},null,-1),a("span",null,"加载失败，请点击重试",-1)]))]),_:1},8,["src"])):R((n(),p("div",Re,null,512)),[[z,!0]]),e(y)?(n(),p("div",{key:2,class:"fail-tip",onClick:g},c[2]||(c[2]=[a("span",null,[M("扫码超时"),a("br"),M("点击重新扫码")],-1)]))):V("",!0)])}}},Fe=B(qe,[["__scopeId","data-v-5382f27d"]]),Pe={class:"login-box"},Ae={key:0,class:"icon-box"},Ne={class:"login-form"},Ke={class:"title"},Oe={class:"tips"},Qe={class:"scan-box"},Ze={class:"policy"},je=["innerHTML"],We={class:"is-read"},Ye={__name:"Box",props:{showIcon:{type:Boolean,default:!0},loginSuccess:{type:Function}},setup(v){const i=f(!1),_=f("wx"),s=le(()=>{switch(_.value){case"wx":return{title:"快捷登录",tips:"微信扫一扫注册/登录"};case"forget":return{title:"安全验证",tips:"为了保证您的账号安全，请进行安全验证"};case"register":return{title:"账号注册",tips:"验证手机号后注册"};default:return{title:"密码登录",tips:"输入账号密码登录"}}}),w=A({title:"考试资料网服务条款",richText:""}),y=f(!1),b=g=>{if(y.value=!0,g===2){w.title="考试资料网隐私协议",F({TypeID:9}).then(o=>{w.richText=o.HelpList[0].Analysis});return}w.title="考试资料网服务条款",F({TypeID:7}).then(o=>{w.richText=o.HelpList[0].Analysis})},S=g=>{_.value=g};return(g,o)=>{const h=Be,c=Fe,$=we,z=j,T=Q,d=ye;return n(),p("div",Pe,[v.showIcon?(n(),p("div",Ae,o[8]||(o[8]=[a("img",{src:"https://static.ppkao.com/www/images/login/icon64.png",class:"icon"},null,-1)]))):V("",!0),e(_)!=="wx"?(n(),p("img",{key:1,src:"https://static.ppkao.com/www/images/login/wx-icon.png",class:"change-icon",onClick:o[0]||(o[0]=x=>_.value="wx")})):(n(),p("img",{key:2,src:"https://static.ppkao.com/www/images/login/input-icon.png",class:"change-icon",onClick:o[1]||(o[1]=x=>_.value="account")})),a("div",Ne,[a("p",Ke,H(e(s).title),1),a("p",Oe,H(e(s).tips),1),a("div",Qe,[u(ae,{name:"fade-transform",mode:"out-in"},{default:r(()=>[e(_)!=="wx"?(n(),C(h,{key:0,"login-success":v.loginSuccess,onUpdateTitle:S},null,8,["login-success"])):(n(),C(c,{key:1,"login-success":v.loginSuccess},null,8,["login-success"]))]),_:1}),e(i)?V("",!0):(n(),p("div",{key:0,class:ie({"scan-tip":!0,"scan-blur":e(_)==="wx","form-blur":e(_)==="account"})},null,2))]),a("p",Ze,[u(z,{placement:"bottom",teleported:!1,offset:6,visible:!e(i),content:"请阅读之后勾选"},{default:r(()=>[u($,{modelValue:e(i),"onUpdate:modelValue":o[2]||(o[2]=x=>q(i)?i.value=x:null),style:{"margin-right":"6px"}},null,8,["modelValue"])]),_:1},8,["visible"]),a("span",{onClick:o[3]||(o[3]=x=>i.value=!e(i))},"我已阅读并同意"),a("span",null,[a("a",{onClick:o[4]||(o[4]=x=>b(1))},"《服务条款》"),o[9]||(o[9]=M("、")),a("a",{onClick:o[5]||(o[5]=x=>b(2))},"《隐私协议》")])])]),u(d,{title:e(w).title,"destroy-on-close":"","append-to-body":"",modelValue:e(y),"onUpdate:modelValue":o[7]||(o[7]=x=>q(y)?y.value=x:null),width:"30%",center:""},{default:r(()=>[a("p",{innerHTML:e(w).richText,class:"rich-text custom-scrollbar"},null,8,je),a("div",We,[u(T,{type:"primary",onClick:o[6]||(o[6]=x=>y.value=!1)},{default:r(()=>o[10]||(o[10]=[M("我已阅读")])),_:1})])]),_:1},8,["title","modelValue"])])}}},at=B(Ye,[["__scopeId","data-v-80b675bb"]]);export{at as _};
